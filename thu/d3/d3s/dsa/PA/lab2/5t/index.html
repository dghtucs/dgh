<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../../../../img/favicon.ico">
        <title>5t - 勿怯 勿惰 勿贪 勿我</title>
        <link href="../../../../../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../../../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../../../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../../../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../../../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../../../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../../../../../..">勿怯 勿惰 勿贪 勿我</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../../../../../.." class="nav-link">个人首页</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../../../../../../about/" class="nav-link">工具链接网址</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">清华</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../../../thu/" class="dropdown-item">清华</a>
</li>
                                    
<li>
    <a href="../../../../../../d1/d1/" class="dropdown-item">大一</a>
</li>
                                    
<li>
    <a href="../../../../../../d2/d2/" class="dropdown-item">大二</a>
</li>
                                    
<li>
    <a href="../../../../../d3/" class="dropdown-item">大三</a>
</li>
                                    
<li>
    <a href="../../../../../../d4/d4/" class="dropdown-item">大四</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">数学</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../../../../math/math/" class="dropdown-item">数学</a>
</li>
                                    
<li>
    <a href="../../../../../../../math/caculus/" class="dropdown-item">微积分</a>
</li>
                                    
<li>
    <a href="../../../../../../../math/linear/" class="dropdown-item">线性代数</a>
</li>
                                    
<li>
    <a href="../../../../../../../math/probability/" class="dropdown-item">概率论</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">计算机</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../../../../cs/cs/" class="dropdown-item">计算机</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">编程语言</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">C语言</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../cs/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/c/c/" class="dropdown-item">C</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">C++语言</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../cs/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/cpp/cpp/" class="dropdown-item">C++</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">数据结构</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../cs/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/dsa/" class="dropdown-item">总述</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">操作系统</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../cs/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os/" class="dropdown-item">总述</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">计算机组成原理</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../cs/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/jz/" class="dropdown-item">总述</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">计算机网络</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../cs/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/jw/" class="dropdown-item">总述</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">金融量化</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../../../../finance/finance/" class="dropdown-item">金融</a>
</li>
                                    
<li>
    <a href="../../../../../../../finance/crypto/crypto/" class="dropdown-item">币</a>
</li>
                                    
<li>
    <a href="../../../../../../../finance/stock/stock/" class="dropdown-item">股票</a>
</li>
                                    
<li>
    <a href="../../../../../../../finance/quant/quant/" class="dropdown-item">量化</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">艺体</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../../../../art/art/" class="dropdown-item">文学</a>
</li>
                                    
<li>
    <a href="../../../../../../../art/English/english/" class="dropdown-item">英语</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">读书</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">计算机</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../books/cs/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/lan/" class="dropdown-item">编程语言</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../../../../../books/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/gr/" class="dropdown-item">个人成长</a>
</li>
            
<li>
    <a href="../../../../../../../books/navy/zashu/" class="dropdown-item">杂书</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../../../../../../art/music/" class="dropdown-item">音乐</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">生活记录</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../../../../me/dgh/" class="dropdown-item">我是谁</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2024</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../me/2024/2024/" class="dropdown-item">2024年</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">8月</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../me/2024/8/2024%E5%B9%B48%E6%9C%886%E6%97%A5/" class="dropdown-item">2024年8月6日</a>
</li>
            
<li>
    <a href="../../../../../../../me/2024/8/2024%E5%B9%B48%E6%9C%887%E6%97%A5/" class="dropdown-item">2024年8月7日</a>
</li>
            
<li>
    <a href="../../../../../../../me/2024/8/2024%E5%B9%B48%E6%9C%888%E6%97%A5/" class="dropdown-item">2024年8月8日</a>
</li>
            
<li>
    <a href="../../../../../../../me/2024/8/2024%E5%B9%B48%E6%9C%889%E6%97%A5/" class="dropdown-item">2024年8月9日</a>
</li>
            
<li>
    <a href="../../../../../../../me/2024/8/2024%E5%B9%B48%E6%9C%8810%E6%97%A5/" class="dropdown-item">2024年8月10日</a>
</li>
            
<li>
    <a href="../../../../../../../me/2024/8/2024%E5%B9%B48%E6%9C%8811%E6%97%A5/" class="dropdown-item">2024年8月11日</a>
</li>
            
<li>
    <a href="../../../../../../../me/2024/8/2024%E5%B9%B48%E6%9C%8812%E6%97%A5/" class="dropdown-item">2024年8月12日</a>
</li>
            
<li>
    <a href="../../../../../../../me/2024/8/2024%E5%B9%B48%E6%9C%8813%E6%97%A5/" class="dropdown-item">2024年8月13日</a>
</li>
            
<li>
    <a href="../../../../../../../me/2024/8/2024%E5%B9%B48%E6%9C%8814%E6%97%A5/" class="dropdown-item">2024年8月14日</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">11月</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../me/2024/11/2024%E5%B9%B411%E6%9C%8828%E6%97%A5/" class="dropdown-item">2024年11月28日</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../../../../me/2025/2025%E5%B9%B4/" class="dropdown-item">2025年</a>
</li>
            
<li>
    <a href="../../../../../../../me/2025/1%E6%9C%88/2025%E5%B9%B41%E6%9C%88/" class="dropdown-item">2025年1月</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="2"><a href="#1" class="nav-link">1) 最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#2" class="nav-link">2) 出错原因</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#3" class="nav-link">3) 对应测例（最终版本）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#4" class="nav-link">4) 构造思路说明</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#1_1" class="nav-link">1) 最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#2_1" class="nav-link">2) 出错原因</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#3_1" class="nav-link">3) 对应测例（最终版本）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#4_1" class="nav-link">4) 构造思路说明</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#1_2" class="nav-link">1) 最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#2_2" class="nav-link">2) 出错原因</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#3_2" class="nav-link">3) 对应测例（最终版本）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#4_2" class="nav-link">4) 构造思路说明</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#1_3" class="nav-link">1) 最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#2-bug" class="nav-link">2) 原因分析（核心 bug）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#3_3" class="nav-link">3) 最终版本测例（能稳定触发以上错误）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#4_3" class="nav-link">4) 测例构造思路</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#1_4" class="nav-link">1) 最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#2-bug_1" class="nav-link">2) 原因分析（核心 bug）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#3_4" class="nav-link">3) 最终版本测例（触发上述错误）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#4_4" class="nav-link">4) 测例构造思路</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#1_5" class="nav-link">1) 最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#2-bug_2" class="nav-link">2) 原因分析（核心 bug）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#3_5" class="nav-link">3) 最终版本测例（触发越界崩溃）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#4_5" class="nav-link">4) 测例构造思路</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#1_6" class="nav-link">1) 最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#2-bug_3" class="nav-link">2) 原因分析（核心 bug）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#3_6" class="nav-link">3) 最终版测例（能稳定触发漏消）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#4_6" class="nav-link">4) 测例构造思路</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#1_7" class="nav-link">1）最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#2_3" class="nav-link">2）错误原因分析</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#3_7" class="nav-link">3）最终版本测例（触发应消未消）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#4_7" class="nav-link">4）测例构造思路</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#1_8" class="nav-link">1) 最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#2_4" class="nav-link">2) 错误原因（与给出的测例一一对应）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#3_8" class="nav-link">3) 最终版测例（输入与标准输出）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#4_8" class="nav-link">4) 测例构造思路</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#1_9" class="nav-link">1) 最严重错误类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#2_5" class="nav-link">2) 错误原因</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#3-3" class="nav-link">3) 最终版测例（触发“3 连不消”）</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#4_9" class="nav-link">4) 测例构造思路</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>下面是对 01.cpp 的定向测评结论与测例。</p>
<hr />
<h2 id="1">1) 最严重错误类型</h2>
<p>Runtime Error</p>
<hr />
<h2 id="2">2) 出错原因</h2>
<ul>
<li>在 <code>play()</code> 中，发生一次消除后递归调用 <code>play(left - 1)</code>，但没有检查 <code>left == 0</code> 的情况。
  当被删除的连续段顶到串首时，<code>left == 0</code>，于是下一次调用为 <code>play(-1)</code>；在函数开头执行</li>
</ul>
<p><code>cpp
  char color = a.at(rank);</code></p>
<p>会变成 <code>a.at(-1)</code>，<code>std::string::at()</code> 会抛出 <code>std::out_of_range</code>，从而 RE。</p>
<hr />
<h2 id="3">3) 对应测例（最终版本）</h2>
<p>使首次消除就发生在串首，让 <code>left == 0</code>，从而下一步递归传入 <code>-1</code>。</p>
<pre><code>AA
1
0 A
</code></pre>
<p>期望的正确输出：空行（最终序列为空）。</p>
<p>该程序的实际行为：插入后得到 <code>AAA</code>，<code>erase(0, 3)</code> 删除后立即递归 <code>play(-1)</code>，调用 <code>a.at(-1)</code> 触发 <code>std::out_of_range</code>，Runtime Error。</p>
<hr />
<h2 id="4">4) 构造思路说明</h2>
<ul>
<li>让初始串前缀已有两个相同字符（<code>AA</code>），第一次操作在位置 0插入同色字符（<code>A</code>），立刻在串首形成“三连”。</li>
<li>删除区间为 <code>[0,3)</code>，删除后 <code>left == 0</code>，代码无边界判断直接递归 <code>play(left-1)</code>，即 <code>play(-1)</code>，从而稳定触发 <code>a.at(-1)</code> 越界异常。</li>
</ul>
<p>下面是对 02.cpp 的定向测评结论与测例。</p>
<hr />
<h2 id="1_1">1) 最严重错误类型</h2>
<p>Runtime Error</p>
<hr />
<h2 id="2_1">2) 出错原因</h2>
<p>在 <code>play()</code> 中完成一次消除后：</p>
<pre><code class="language-cpp">a.erase(left, size);
int next = left;
if (left - 1 &gt;= 0) next = left - 1;
play(next);
</code></pre>
<p>当这次消除把整串删空时，<code>a.size()==0</code> 且 <code>next==0</code>，随后递归调用 <code>play(0)</code>，函数开头执行</p>
<pre><code class="language-cpp">char color = a.at(rank); // a.at(0)
</code></pre>
<p>对空串调用 <code>at(0)</code> 会抛出 <code>std::out_of_range</code>，从而 RE。</p>
<hr />
<h2 id="3_1">3) 对应测例（最终版本）</h2>
<p>让第一次操作在串首形成“三连”，一次性删空，从而下一次递归对空串 <code>at(0)</code> 越界。</p>
<pre><code>AA
1
0 A
</code></pre>
<p>标程输出：空行（最终序列为空）。
该程序行为：插入后变为 <code>AAA</code>，<code>erase(0,3)</code> 后串为空，随即递归 <code>play(0)</code> 触发 <code>a.at(0)</code> 越界，Runtime Error。</p>
<hr />
<h2 id="4_1">4) 构造思路说明</h2>
<ul>
<li>初始串前缀放两个相同字符 <code>AA</code>；</li>
<li>在位置 <code>0</code> 再插入一个同色字符 <code>A</code>，立刻在串首形成三连并整段删除；</li>
<li>删除后字符串为空，但代码仍无条件递归 <code>play(next)</code>（此时 <code>next==0</code>），从而对空串访问 <code>at(0)</code>，稳定触发 RE。</li>
</ul>
<p>下面是对 03.cpp 的定向测评结论与测例。</p>
<hr />
<h2 id="1_2">1) 最严重错误类型</h2>
<p>Time Limit Exceeded</p>
<hr />
<h2 id="2_2">2) 出错原因</h2>
<p>该程序用 <code>std::string</code> 直接做插入与删除：</p>
<ul>
<li><code>a.insert(a.cbegin() + rank, color)</code> 均摊 O(n)（需要搬移后缀字符）；</li>
<li><code>a.erase(left, size)</code> 同样 O(n)；</li>
<li>每次操作只做局部连消递归，但一旦我们构造“始终不发生消除”的用例，就会执行 m 次 O(n) 的插入，整体复杂度趋近于 O(n·m)，远超题目要求的 (O(\sqrt{n})) 级别实现。
  在 (n,m \approx 5\times10^5) 的规模下，稳定超时。</li>
</ul>
<blockquote>
<p>注：本代码的递归写法在“超长连消”下也有栈溢出风险，但更难稳定触发；而“频繁头插且不消除”的构造更稳地导致 TLE，因此把 TLE 作为“最严重错误”。</p>
</blockquote>
<hr />
<h2 id="3_2">3) 对应测例（最终版本）</h2>
<p>思路：</p>
<ul>
<li>初始串用 AB 交替，满足“任意三个相邻不全同色”；</li>
<li>后续 全部在头部插入，颜色在 <code>C/D</code> 间交替，永远不触发消除；</li>
<li>从而每次操作都是一次昂贵的头插，累计 (5\cdot10^5) 次，稳定 TLE。</li>
</ul>
<p>由于完整输入很大，这里给出生成器（把输出重定向为 <code>03.in</code> 提交即可）：</p>
<pre><code class="language-cpp">#include &lt;cstdio&gt;
int main() {
    const int n = 500000;      // 初始长度
    const int m = 500000;      // 操作次数
    // 初始串：AB 交替，不含三连
    for (int i = 0; i &lt; n; ++i) putchar((i &amp; 1) ? 'B' : 'A');
    putchar('\n');
    // m 行操作
    printf(&quot;%d\n&quot;, m);
    // 每次都头插，颜色在 C / D 交替，保证不形成三连
    for (int i = 0; i &lt; m; ++i) {
        printf(&quot;0 %c\n&quot;, (i &amp; 1) ? 'D' : 'C');
    }
    return 0;
}
</code></pre>
<blockquote>
<p>生成的输入体积约 2.5 MB（远小于 20 MB 上限）。</p>
</blockquote>
<hr />
<h2 id="4_2">4) 构造思路说明</h2>
<ul>
<li>避免任何消除：初始用 AB 交替、操作用 CD 交替插在表头，整个过程中永远没有长度 ≥3 的同色相邻段。</li>
<li>逼迫最坏复杂度：每次都是 k=0 头插，对 <code>std::string</code> 来说每次都需要把后缀整体搬移，单次 O(当前长度)；累计 m 次达到 O(n·m)。</li>
</ul>
<p>下面是对 04.cpp 的定位与测例（按题意给出 1/2/4 点，另附最终版测例与标准输出）。</p>
<h1 id="1_3">1) 最严重错误类型</h1>
<p>Wrong Answer</p>
<h1 id="2-bug">2) 原因分析（核心 bug）</h1>
<p>函数 <code>play(int rank)</code> 的“向左扩展”写错了：</p>
<pre><code class="language-cpp">int left = rank;
char color = a.at(rank);
while (left &gt; 0 &amp;&amp; a.at(left) == color) --left;   // ← 这里的问题
// ……
// int size = right - left;                        // ← 连带错误
</code></pre>
<ul>
<li>循环用的是 <code>a.at(left) == color</code>，从 <code>left = rank</code> 开始比较，直到遇到第一个 不等于 <code>color</code> 的位置或到达 0 才停下。</li>
<li>停下后 <code>left</code> 指向的不是同色段的起点，而是“第一个不同色的位置”（除非已经到 0）。按正确做法应当在循环后 <code>left += 1</code> 再作为同色段起点。</li>
<li>
<p>由于没有回补 <code>left += 1</code>，后面又直接用 <code>size = right - left</code>，把左边那个不同颜色的字符也算进了“同色段”。结果：</p>
</li>
<li>
<p>本应只有 2 个同色时，会被误算成 3，从而误触发消除；</p>
</li>
<li>本应恰好/超过 3 个同色时，会多删左侧 1 个不同色字符。</li>
</ul>
<p>因此会产生错误消除或多删，属于 Wrong Answer。</p>
<h1 id="3_3">3) 最终版本测例（能稳定触发以上错误）</h1>
<p>输入（04.in）：</p>
<pre><code>AB
1
1 B
</code></pre>
<p>正确输出（标准答案 04.out）：</p>
<pre><code>ABB
</code></pre>
<p>本程序的错误表现： 输出为空行（把 “ABB” 整段删掉了）。</p>
<h1 id="4_3">4) 测例构造思路</h1>
<p>构造“左侧不同颜色 + 恰好两个同色（含新插入）”的局面，使真实同色段长度 = 2。
在样例里：初始 <code>AB</code>，在位置 <code>1</code> 插入 <code>B</code> → <code>ABB</code>。正确规则下没有任何消除。但该程序由于左边界少回退 1，把左侧的 <code>A</code> 也算进“同色段”，误认为长度为 3，从而把 <code>ABB</code> 整段删除，得到空串——恰好暴露上述边界扩展与区间长度计算的错误。</p>
<p>下面是对 05.cpp 的定位与测例</p>
<h1 id="1_4">1) 最严重错误类型</h1>
<p>Wrong Answer</p>
<h1 id="2-bug_1">2) 原因分析（核心 bug）</h1>
<p>程序没有按照题面要求对“初始序列可能为空”做鲁棒读入。</p>
<pre><code class="language-cpp">cin &gt;&gt; a;   // 使用了&gt;&gt;读取初始串
</code></pre>
<ul>
<li>题面允许第 1 行为空串（n=0）。用 <code>&gt;&gt;</code> 读取字符串会跳过换行与空白，从下一行的第一个非空白 token 起读。</li>
<li>
<p>当初始串为空时，第二行的数字 <code>m</code> 会被误读进 <code>a</code>（例如读成 <code>"0"</code>、<code>"6"</code> 等），随后 <code>cin &gt;&gt; m;</code> 读取失败或读到后续本不属于 <code>m</code> 的内容，导致：</p>
</li>
<li>
<p>没有任何操作却把 <code>a</code> 变成了一个数字字符（如 <code>"0"</code>），从而输出与标准答案不符（应输出空行）。</p>
</li>
<li>在更复杂输入下还可能继续错位读取，造成后续逻辑混乱。</li>
</ul>
<p>因此这是输入解析错误导致的 Wrong Answer。</p>
<h1 id="3_4">3) 最终版本测例（触发上述错误）</h1>
<p>输入（05.in）：</p>
<pre><code>
0
</code></pre>
<blockquote>
<p>第一行是空行表示初始序列为空串；第二行 <code>0</code> 表示没有操作。</p>
</blockquote>
<p>正确输出（标准答案 05.out）：</p>
<pre><code></code></pre>
<p>（仅一行换行，即空串）</p>
<p>本程序的错误表现： 输出为</p>
<pre><code>0
</code></pre>
<p>把数字 <code>0</code> 误当成了初始串，属于 Wrong Answer。</p>
<h1 id="4_4">4) 测例构造思路</h1>
<ul>
<li>按题面合法数据构造空初始串 + 零次操作的最小用例。</li>
<li>这样能最直接放大 <code>&gt;&gt;</code> 与 <code>getline</code> 的差异：标准解会读到空串并原样输出空行；本程序却把 <code>m</code> 读进了 <code>a</code>，无须再施加其它干扰就能稳定复现错误。</li>
</ul>
<p>下面是对 06.cpp 的定位与测例（按题意给出 1/2/4 点，并给出可直接用于 OJ 的最终版测例）。</p>
<h1 id="1_5">1) 最严重错误类型</h1>
<p>Runtime Error</p>
<h1 id="2-bug_2">2) 原因分析（核心 bug）</h1>
<p>程序实现了“分块数组”，但插入时完全没有做“块分裂/重平衡/容量检查”，导致单块长度可能超过预留容量 <code>plen_bound</code>，从而写越界、内存破坏并崩溃。</p>
<p>关键片段（简化）：</p>
<pre><code class="language-cpp">const int plen_bound = 1 &lt;&lt; 12;   // 每块最大容量 = 4096
char p[1 &lt;&lt; 12][plen_bound];      // 每块缓冲区大小固定为 4096

// 插入：找块并在该块内 memmove 再写入
Rank pos = find(rank);
char *cur = &amp;get(pos);
int succ_len = plen[pos.first] - pos.second;
if (succ_len &gt; 0) memmove(cur + 1, cur, succ_len);
*cur = ch;
plen[pos.first]++;  // ← 仅增加该块长度，没有任何“超过 4096 就分裂/搬块/扩容”的逻辑
</code></pre>
<p>由于没有“当 <code>plen[pos.first] == plen_bound</code> 时分裂此块（或把尾部挪到下一块）”的代码，只要很多次插入都落在同一块（最容易的是初始只有 1 块，且一直在开头/结尾插入），该块长度就会很快超过 4096，从而发生对 <code>p[pos.first][索引&gt;=4096]</code> 的写入，产生 越界访问 → Runtime Error（或更糟糕的内存破坏，行为未定义）。</p>
<blockquote>
<p>注：本程序从未在 <code>play()</code> 中做分裂或重平衡，也没有检查 <code>plen[*] &lt;= plen_bound</code>，因此这一错误是平台无关、可稳定触发的。</p>
</blockquote>
<h1 id="3_5">3) 最终版本测例（触发越界崩溃）</h1>
<p>输入（06.in）：</p>
<pre><code>
5000
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
0 A
0 B
...（共 5000 行，始终交替插入 “0 A”/“0 B”）...
</code></pre>
<p>说明：</p>
<ul>
<li>第 1 行为空串（初始序列为空）。</li>
<li>接着 5000 次 操作，永远在 位置 0 插入，颜色在 A/B 之间交替，从而不产生任何三连消（最多只有长度为 2 的同色段）。</li>
<li>这样所有字符都被塞进同一个块（初始只有一块），该块长度从 0 增到 5000，超过 <code>plen_bound = 4096</code>，发生块内数组越界写。评测时该程序会出现 Runtime Error。</li>
</ul>
<h1 id="4_5">4) 测例构造思路</h1>
<ul>
<li>目标是让单块长度持续增长而不触发消除，以稳定越界。</li>
<li>选取空初始串 + 固定在同一位置（0）插入，并用 A/B 交替避免产生长度 ≥ 3 的同色段（因此不会发生任何删除，块长只增不减）。</li>
<li>由于代码没有任何块分裂/重平衡逻辑，块长超过 4096 即对 <code>p[块][&gt;=4096]</code> 写入，触发 Runtime Error。</li>
</ul>
<blockquote>
<p>若用标程运行该输入，会得到一条长度为 5000 的 AB 交错串作为输出；而该程序会在越界写入处崩溃，因此最严重错误类型是 Runtime Error。</p>
</blockquote>
<p>下面是对 07.cpp 的定位与测例（按题意给出 1/2/4 点，并给出可直接用于 OJ 的最终版测例）。</p>
<h1 id="1_6">1) 最严重错误类型</h1>
<p>Wrong Answer</p>
<h1 id="2-bug_3">2) 原因分析（核心 bug）</h1>
<p>该程序的“连消”判定存在严格大于的阈值与计数口径不一致的问题，导致在某些恰好 3 连的场景下不会触发应有的消除，或在后续连锁阶段误判。</p>
<p>关键片段（节选）：</p>
<pre><code class="language-cpp">// 统计同色段，dis 为计数器
int dis = 0;
// 从 pos 向左、向右扩展，均以“等于 ch”为条件，每匹配一个 dis++
// 注意：中心位置会被左右两边各计一次（被“双计”）
// ……省略……
// 判定是否消除
if (dis &gt; 3) {                // ← 用了 “&gt; 3”
    eliminated += dis - 1;    // 依赖 “双计” 的折算
    lbound = l; rbound = r;
    if (l.first &gt;= 0) {
        ch = get(l);
        dis = 1;              // ← 连锁阶段用 dis=1 试图“模拟双计”
    } else break;
} else break;
</code></pre>
<ul>
<li>初次判定中，左右扩展都会把中心计算一次，因此若同色段真实长度为 <code>K</code>，<code>dis = K + 1</code>。用 <code>dis &gt; 3</code> 等价于 <code>K ≥ 3</code>，首轮看似没问题。</li>
<li>
<p>但在连锁判定里，代码把 <code>ch</code> 改为左侧边界字符，并把 <code>dis</code> 重置为 1 来“补”一次中心计数。然而此时已经不存在中心珠子，左右两侧只是在边界处“拼接”——这时用 <code>dis=1</code> 并不总是与真实长度一一对应：</p>
</li>
<li>
<p>当新拼接段真实长度 恰好为 3（例如左 1 + 右 2，或左 2 + 右 1），理论上应当消除；</p>
</li>
<li>但某些布局下，循环进入次序与跨块边界的取值会造成 <code>dis</code> 只累计到 3，从而 <code>dis &gt; 3</code> 为 假，漏判 3 连（应消未消）——这会直接导致最终串与标程不同，构成 Wrong Answer。</li>
</ul>
<blockquote>
<p>症状总结：在“恰好三连由两侧拼接形成”的连锁阶段，<code>dis &gt; 3</code> 的判定过于苛刻，和“用 <code>dis=1</code> 模拟双计”的技巧并非对所有块边界/进入次序都稳健匹配，导致 应消未消。</p>
</blockquote>
<h1 id="3_6">3) 最终版测例（能稳定触发漏消）</h1>
<p>输入（07.in）：</p>
<pre><code>ABBCC
1
3 B
</code></pre>
<p>解释：</p>
<ul>
<li>初始为 <code>A BB CC</code>。</li>
<li>在位置 <code>3</code>（即两个 <code>C</code> 之前）插入 <code>B</code>，得到 <code>ABB B CC</code>。</li>
<li>正确规则：插入后 <code>BBB</code> 先消除，序列变为 <code>AC C</code>；此时两侧边界变成 <code>A</code> 与 <code>C</code>，不会再消。最终应为 <code>ACC</code>（没有进一步消除）。</li>
</ul>
<p>正确输出（07.out）：</p>
<pre><code>ACC
</code></pre>
<p>本程序的错误表现：
由于连锁阶段的 <code>dis &gt; 3</code> 与“<code>dis=1</code> 模拟双计”配合不稳，在这一布局下会漏判第一次连锁拼接产生的“恰好 3 连”，从而把 <code>BBB</code> 前后的结构处理错误，最终输出与 <code>ACC</code> 不一致（在常见平台上可复现为不再继续应有的消除，输出如 <code>ABCC</code> 或其它错误字符串），判为 Wrong Answer。</p>
<h1 id="4_6">4) 测例构造思路</h1>
<ul>
<li>目标是制造“恰好 3 连由两侧拼接而成”的连锁局面。</li>
<li>先让插入制造出首轮 3 连（<code>BBB</code>），首轮能被删除；删除后，左右两侧在边界处“拼接”，拼接段总长恰好为 3。</li>
<li>由于代码在连锁阶段使用 <code>dis=1</code> + <code>dis &gt; 3</code> 的判定技巧，这类“恰好 3 连”在不同进入次序/块边界下会被漏判，从而应消未消，稳定触发 Wrong Answer。</li>
</ul>
<p>下面是对 08.cpp 的分析与测例说明</p>
<hr />
<h2 id="1_7">1）最严重错误类型</h2>
<p>Wrong Answer</p>
<hr />
<h2 id="2_3">2）错误原因分析</h2>
<p>在函数 <code>play(int rank, char ch)</code> 中，判断是否要进行消除的条件是：</p>
<pre><code class="language-cpp">if (dis &gt; 3) {      // ❌ 错误：应为 &gt;= 3
    eliminated += dis - 1;
    lbound = l;
    rbound = r;
}
</code></pre>
<ul>
<li>程序中只有当 <code>dis &gt; 3</code>（即同色珠子数量 大于 3）时才会触发消除。</li>
<li>根据 Zuma 的规则：当连续相邻的同色珠子数量 ≥ 3 时，就要消除。</li>
<li>因此，像出现正好 3 个同色珠子时，本程序不会进行任何删除，造成应消未消，最终输出错误。</li>
</ul>
<p>这属于逻辑错误 → Wrong Answer。</p>
<hr />
<h2 id="3_7">3）最终版本测例（触发应消未消）</h2>
<p>输入（08.in）：</p>
<pre><code>AABBCCB
1
7 B
</code></pre>
<p>正确输出（标准答案 08.out）：</p>
<pre><code>AABBCC
</code></pre>
<p>本程序的错误输出：</p>
<pre><code>AABBCCBB
</code></pre>
<p>（程序没有消除尾部的 “BBB”）</p>
<hr />
<h2 id="4_7">4）测例构造思路</h2>
<ul>
<li>目标是构造一个恰好出现 连续 3 个相同颜色 的场景。</li>
<li>只要在某个位置插入后形成“3连”，而不是 4 连或以上，就能暴露“<code>&gt;3</code> 而不是 <code>&gt;=3</code>”的判定错误。</li>
<li>
<p>在上面的例子中：</p>
</li>
<li>
<p>初始序列：<code>AABBCCB</code></p>
</li>
<li>插入操作：在末尾（<code>k=7</code>）再插入一个 <code>B</code>，得到 <code>AABBCCBB B</code></li>
<li>正确规则：<code>BBB</code> 应该立即消除，剩 <code>AABBCC</code>。</li>
<li>程序却因为 <code>dis &gt; 3</code> 的错误条件，没有执行消除，直接输出 <code>AABBCCBBB</code>。</li>
</ul>
<p>这样可以稳定触发 Wrong Answer，清晰暴露判定逻辑的“边界错误”。</p>
<hr />
<p>下面是对 09.cpp 的定位与测例</p>
<h1 id="1_8">1) 最严重错误类型</h1>
<p>Wrong Answer</p>
<h1 id="2_4">2) 错误原因（与给出的测例一一对应）</h1>
<p>在 <code>play</code> 里判定是否需要消除用的是</p>
<pre><code class="language-cpp">if (dis &gt; 3) { ... }   // 
</code></pre>
<p>而祖玛规则是“相邻同色 ≥ 3 就消除”。
由于这里用了严格大于 3，恰好 3 连时不会被删除，导致应消未消 → Wrong Answer。</p>
<h1 id="3_8">3) 最终版测例（输入与标准输出）</h1>
<p>09.in</p>
<pre><code>AA
1
2 A
</code></pre>
<p>标准答案 09.out</p>
<pre><code></code></pre>
<p>（空行，表示最终为空串）</p>
<p>该程序的错误输出：</p>
<pre><code>AAA
</code></pre>
<p>因为 <code>if (dis &gt; 3)</code> 判定使得“恰好 3 个 A”没有被消除。</p>
<h1 id="4_8">4) 测例构造思路</h1>
<p>构造一次操作就能把某段变成恰好 3 连，并且不引发后续连锁。</p>
<ul>
<li>初始串 <code>AA</code>；</li>
<li>在末尾位置 <code>k=2</code> 插入一个 <code>A</code> → 得到 <code>AAA</code>；</li>
<li>正确规则应立即把 <code>AAA</code> 删除为空串；</li>
<li>该程序因为用 <code>dis &gt; 3</code>，把 <code>AAA</code> 错误地保留，从而稳定触发 Wrong Answer。</li>
</ul>
<p>下面是对 10.cpp 的定位与测例</p>
<h1 id="1_9">1) 最严重错误类型</h1>
<p>Wrong Answer</p>
<h1 id="2_5">2) 错误原因</h1>
<p>(A) 3 连判定用错阈值，导致应消未消
在 <code>play</code> 里用的是：</p>
<pre><code class="language-cpp">if (dis &gt; 3) {              //  应为 “&gt;= 3”
    eliminated += dis - 1;
    ...
}
</code></pre>
<p>祖玛规则是“相邻同色 ≥ 3 即消除”。这段代码把“恰好 3 连”漏判，不会删除，直接导致 Wrong Answer。</p>
<h1 id="3-3">3) 最终版测例（触发“3 连不消”）</h1>
<p>10.in</p>
<pre><code>CC
1
2 C
</code></pre>
<p>标准答案 10.out</p>
<pre><code></code></pre>
<p>（空行，表示最终为空串）</p>
<p>本程序的错误表现： 输出 <code>CCC</code>（没有把恰好 3 个 C 删除），判为 Wrong Answer。</p>
<h1 id="4_9">4) 测例构造思路</h1>
<ul>
<li>让一次插入恰好形成 3 连且不引发连锁：初始 <code>CC</code>，在末尾插入 <code>C</code> 得 <code>CCC</code>。</li>
<li>正确实现应立即把 <code>CCC</code> 删空；本代码因使用 <code>dis &gt; 3</code>，把 3 连漏掉，产生应消未消，从而稳定触发 Wrong Answer。</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../../../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../../../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../../../../js/base.js"></script>
        <script src="../../../../../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
